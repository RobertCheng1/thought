## 数据结构\_排序_堆排序

### 一、算法特性

下标|0|1|2|3|4|5|6|7|8
:--|:--|:--|:--|:--|:--|:--|:--|:--|:--
--|tmp|5|2|1|6|9|3|8|7

> 记得选择排序吗？如果当前下标为1，我们把它的值5赋值给tmp，然后循环和后面的值进行比较，取出最大值9存入下标1，然后把tmp的值赋值给下标5，这就执行了一次（降序）循环，然后反复！

`有没有发现问题？？？`

`每个元素都要和其后的所有元素比对一遍！`

> 如果每次比对前，我就知道后面的那些元素中最大(小)值是谁，那就简单了！

第一次：最大值就在下标1，直接取走

下标|0|1|2|3|4|5|6|7|8
:--|:--|:--|:--|:--|:--|:--|:--|:--|:--
--|tmp|9|\*|\*|\*|\*|\*|\*|*

第二次：最大值还在下标1，直接取走

下标|0|1|2|3|4|5|6|7|8
:--|:--|:--|:--|:--|:--|:--|:--|:--|:--
--|tmp|8|\*|\*|\*|\*|\*|\*|

第三次：最大值也是下标1，取走

下标|0|1|2|3|4|5|6|7|8
:--|:--|:--|:--|:--|:--|:--|:--|:--|:--
--|tmp|7|\*|\*|\*|\*|\*||


第四次：一样喽～继续


### 二、堆的原理


`问题又来了！！！`

`数组的最大值每次都在下标1的位置上，是如何实现的？？`

下面的数据结构可以解决这个问题，本文以大顶堆描述，小顶堆原理相同：

> 数据结构：堆，其实很简单，就是一颗完全二叉树，元素之间具有一定的特殊关系

##### 元素之间的关系（大顶堆）

1. 除叶子结点外，`每个节点的值都大于其左右孩子的值。`
2. 根节点是最大值
3. 和二叉排序树不一样，不是左小右大！

> _如果我们把数组元素看成堆的元素，然后按照规则构造出大顶堆，那最大值不就是根节点！每次取走根节点，再做一次堆的创建，最大值又在根节点了_

##### 一个关键的规则

在学完全二叉树的时候，我们讲过：

一颗有n个节点的完全二叉树，对其任意节点i，则有：

1. 如果i=1，则为根节点，无双亲
2. 如果2i>n，则节点i没有左孩子
3. 如果2i+1>n，则节点i没有右孩子

其实堆在内存中还是采用原来的数组存储，只不过是在交换元素之间的位置，下面我们一边看代码实现（借用大话数据结构的代码）